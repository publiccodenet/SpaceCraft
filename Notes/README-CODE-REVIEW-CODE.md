# Code Review Notes (Code Structure)

See the main [Project Code and Documentation Review](./README-CODE-REVIEW.md) file for overall context, prompts, and the project structure overview.

## Key Areas for Code Review

### Area 1: `.github/workflows/` (CI/CD Pipelines)

*   **Overview**: Contains GitHub Actions workflow definitions. Currently, only `deploy-spacetime.yml` is active; several others related to Unity builds, Docker, SvelteKit, and content updates exist but have the `.disabled` extension.
*   **`deploy-spacetime.yml`**:
    *   **Purpose**: Workflow to deploy the "spacetime" application (presumably the combined SvelteKit frontend and Unity WebGL build) to DigitalOcean Spaces.
    *   **Trigger**: Runs on `workflow_dispatch` (manual trigger).
    *   **Jobs**:
        *   `deploy`:
            *   Runs on `ubuntu-latest`.
            *   Checks out the repository.
            *   Uses `jakejarvis/s3-sync-action@v0.5.1` to sync the `./WebSites/spacetime` directory to a DigitalOcean Space (`nyc3.digitaloceanspaces.com/spacetime-interface`).
            *   Requires secrets: `AWS_S3_BUCKET`, `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_REGION` (although region seems hardcoded to `nyc3` in the action).
    *   **Role**: Handles the deployment of the static website build to the CDN/storage provider. Assumes the `./WebSites/spacetime` directory is correctly populated with build artifacts *before* this workflow runs.
    *   **Importance**: High (Deployment mechanism).
*   **Disabled Workflows (`*.yml.disabled`)**: Indicate potential past or future functionality related to:
    *   Building Unity for Mac and WebGL.
    *   Building/pushing Docker images for SvelteKit.
    *   Full build and deployment pipelines.
    *   Automated content/collection updates.
    *   These suggest a more complex CI/CD setup was planned or used previously.

### Area 2: `Content/schema/` (JSON Schema Definitions)

*   **Overview**: Contains the generated JSON Schema files (`.json`) which serve as the intermediate format between the TypeScript Zod schemas (source of truth) and the C# generated classes used in Unity. These are generated by `SvelteKit/BackSpace/scripts/schema-export.js`.
*   **`Collection.json`**:
    *   **Purpose**: Defines the JSON Schema structure for collection metadata (`collection.json`).
    *   **Origin**: Generated from `SvelteKit/BackSpace/src/lib/schemas/collection.ts`.
    *   **Structure**: Standard JSON Schema format (`type: 'object'`, `properties`, `required` fields). Includes fields like `id`, `name`, `description`, `query`, `itemCount`, `lastUpdated`, `excludedItemIds`, `extraFields`.
    *   **Metadata (`x_meta`)**: Contains embedded `UnitySchemaConverter` hints (e.g., `DateTimeConverter`) extracted from the Zod schema's `.describe()` calls. This metadata guides the Unity C# generator.
    *   **Role**: Defines the data contract for collections used by both backend scripts and the Unity importer.
    *   **Importance**: High (Core data definition).
*   **`Item.json`**:
    *   **Purpose**: Defines the JSON Schema structure for item metadata (`item.json`).
    *   **Origin**: Generated from `SvelteKit/BackSpace/src/lib/schemas/item.ts`.
    *   **Structure**: Standard JSON Schema format. Includes fields relevant to Internet Archive items like `identifier`, `title`, `creator`, `date`, `description`, `mediaType`, `publisher`, `subject`, `files` (array of file objects), `extraFields`. Allows additional properties (`additionalProperties: true`).
    *   **Metadata (`x_meta`)**: Contains embedded `UnitySchemaConverter` hints (e.g., `StringListConverter`, `FileArrayConverter`) for Unity C# generation.
    *   **Role**: Defines the data contract for items used by backend scripts and the Unity importer.
    *   **Importance**: High (Core data definition).

### Area 3: `SvelteKit/BackSpace/scripts/` (Data Processing & Automation)

*   **Overview**: Contains the core Node.js scripts (written in TypeScript, run via `tsx` or built to JS) that handle the content pipeline, automation, CLI tools, and interaction with Unity.
*   **`base-command.js`**:
    *   **Purpose**: Foundation class (`BaseCommand`) for CLI scripts using `commander`. Centralizes argument parsing, logging (colors/emojis via `chalk`/constants), error handling, progress bars.
    *   **Role**: Provides consistency and reduces boilerplate across all other CLI scripts in this directory. Includes a factory (`createEntityCommandFactory`) for common list/create operations.
    *   **Importance**: High (Core CLI framework).
*   **`collection-create.js`**:
    *   **Purpose**: CLI script (extends `BaseCommand`) to create a new collection directory and `collection.json` file based on arguments (ID, name, query, etc.).
    *   **Role**: Handles the initial setup for a new data collection within the `Content/collections` structure.
    *   **Importance**: Medium (Core collection management task).
*   **`collection-debug.js`**:
    *   **Purpose**: Standalone Node.js script (doesn't use `BaseCommand`) for basic checks and creation of the `content/collections` directory and a test collection file (`test-debug/collection.json`).
    *   **Role**: Ad-hoc debugging and testing of filesystem operations related to collections.
    *   **Importance**: Low (Debugging utility).
*   **`collection-exclude.js`**:
    *   **Purpose**: CLI script using `commander` and `inquirer` (interactive prompts) to validate items within a collection and manage an exclusion list (`excludedItemIds` stored in `collection.json`).
    *   **Role**: Data quality tool for identifying and managing invalid/excluded items based on validation logic (imported from `src/lib/content/validation.js`).
    *   **Importance**: Medium (Data quality and interactive management).
*   **`collection-list.js`**:
    *   **Purpose**: CLI script (extends `BaseCommand`) to list all collections by scanning the `Content/collections` directory and reading each `collection.json`. Supports JSON and verbose output.
    *   **Role**: Provides a quick way to view existing collections and their basic metadata.
    *   **Importance**: Medium (Core collection management task).
*   **`collection-manage.js`**:
    *   **Purpose**: Comprehensive CLI script using `commander` for managing collections: list, create, delete, update, process (placeholder), refresh indexes, get stats, refresh items from IA, recreate indexes. Integrates with `contentManager`.
    *   **Role**: Acts as the primary command-line interface for most collection-related operations, orchestrating calls to the `contentManager`.
    *   **Importance**: High (Central CLI tool for collections).
*   **`collection-process.js`**:
    *   **Purpose**: CLI script (extends `BaseCommand`) intended to fetch and process items for a collection based on its query (e.g., from Internet Archive). Currently simulates processing by updating `lastUpdated`.
    *   **Role**: A key component of the data pipeline for populating collections with actual data. Currently incomplete.
    *   **Importance**: Medium (Core data pipeline, needs implementation).
*   **`connector-manage.js`**:
    *   **Purpose**: CLI script using `commander` to list and test data connectors (e.g., Internet Archive, Unity). Functionality is currently hardcoded/simulated.
    *   **Role**: Intended for managing external data sources/targets, but not fully implemented.
    *   **Importance**: Low-Medium (Future extensibility).
*   **`content-info.js`**:
    *   **Purpose**: CLI script (extends `BaseCommand`) that scans the `Content/collections` directory, reads metadata, counts items, calculates sizes, and displays summary statistics.
    *   **Role**: Provides a system-wide overview of the content managed by BackSpace.
    *   **Importance**: Medium (Useful utility for monitoring).
*   **`content-init.js`**:
    *   **Purpose**: Simple Node.js script to create the necessary directory structure under `Content/` (collections, config, cache, exports, profiles) and create a sample collection/config.
    *   **Role**: One-time setup script to ensure the content system directories exist.
    *   **Importance**: Medium (Essential for initial setup).
*   **`copy-items-to-unity.js`**:
    *   **Purpose**: Standalone Node.js script to copy specified item directories from `Content/collections/[collectionId]/items/` to `Unity/CraftSpace/Assets/Resources/Content/collections/[collectionId]/items/`. Also downloads cover images from `archive.org` and generates an `items-index.json` in the Unity target directory.
    *   **Role**: Critical step in preparing content for the Unity client, making it accessible via the `Resources` folder and providing the necessary index for runtime loading.
    *   **Importance**: High (Core content deployment bridge).
*   **`export-manage.js`**:
    *   **Purpose**: CLI script using `commander` to manage export profiles (create, list) and trigger the export of collections based on these profiles using `exportManager`.
    *   **Role**: Handles the process of preparing and sending collection data to different targets (like Unity, web builds, CDN).
    *   **Importance**: High (Core deployment/integration mechanism).
*   **`item-create.js`**:
    *   **Purpose**: CLI script (extends `BaseCommand`) to create a new item directory and `item.json` file within a specified collection, updating the collection's item count.
    *   **Role**: Allows manual creation of items within the BackSpace content structure.
    *   **Importance**: Medium (Core item management task).
*   **`item-fetch.js`**:
    *   **Purpose**: Placeholder Node.js script intended to fetch detailed metadata and potentially files for a specific item, likely from Internet Archive. Mostly boilerplate.
    *   **Role**: Part of the data pipeline for populating item details. Currently incomplete.
    *   **Importance**: Medium (Core data pipeline, needs implementation).
*   **`item-manage.js`**:
    *   **Purpose**: Comprehensive CLI script using `commander` for managing individual items: list, get details, process (placeholder), download (placeholder), refresh from IA, create empty, delete (to trash), update metadata. Integrates with `contentManager`.
    *   **Role**: Acts as the primary command-line interface for most item-related operations.
    *   **Importance**: High (Central CLI tool for items).
*   **`path-debug.js`**:
    *   **Purpose**: Simple Node.js script that imports `PATHS` from constants and prints their resolved values.
    *   **Role**: Utility for debugging path resolution issues during development.
    *   **Importance**: Low (Debugging utility).
*   **`processor-manage.js`**:
    *   **Purpose**: CLI script using `commander` to list and run content processors (e.g., EPUB, PDF, image) on items. Functionality (listing processors, running them) is currently hardcoded/simulated.
    *   **Role**: Intended for managing and applying content transformations/extractions, but not fully implemented.
    *   **Importance**: Low-Medium (Future data processing).
*   **`schema-debug.js`**:
    *   **Purpose**: Node.js script to scan for `.json` schema files in specified directories (`schemas/`, `Content/schema/`, Unity paths), perform basic checks (e.g., presence of `properties`, properties having `type`), and report potential issues.
    *   **Role**: A linting/validation tool for the JSON schemas generated by `schema-export.js`.
    *   **Importance**: Medium (Development/CI utility for schema validation).
*   **`schema-export.js`**:
    *   **Purpose**: Core Node.js script that imports Zod schemas from `src/lib/schemas/`, converts them to JSON Schema using `zod-to-json-schema`, extracts embedded metadata from descriptions (`.describe()`), injects it as `x_meta`, and writes the final `.json` files directly to the root `Content/schema/` directory.
    *   **Role**: Central piece of the schema pipeline, transforming the TypeScript source of truth (Zod) into the intermediate JSON format used by Unity.
    *   **Importance**: High (Essential for cross-platform schema consistency).
*   **`unity-automation.js`**:
    *   **Purpose**: Node.js script acting as a command-line interface (using `commander`) to automate Unity Editor tasks like regenerating schemas, running builds (dev/prod/WebGL), and running tests. It relies on `unity-env.js` for environment setup and executes Unity via `run-unity.sh`.
    *   **Role**: Provides a way to trigger Unity processes from the command line or CI/CD without manual interaction.
    *   **Importance**: High (Key for automation and CI/CD integration with Unity).
*   **`unity-env.js`**:
    *   **Purpose**: Node.js script designed to detect installed Unity versions, determine the correct version to use (based on env vars or project settings), find the executable path, read project settings, and output environment variables suitable for sourcing (`export VAR=value`) or use by other scripts.
    *   **Role**: Dynamically configures the environment needed to run Unity commands correctly, abstracting away platform differences and installation locations.
    *   **Importance**: High (Essential foundation for Unity automation).
*   **`unity-env.sh`**:
    *   **Purpose**: Simple Bash script wrapper that executes `unity-env.js` and sources its output, making the discovered Unity environment variables available in the current shell session.
    *   **Role**: Convenience utility for developers to easily set up their shell environment for running Unity-related commands manually.
    *   **Importance**: Medium (Developer convenience).
*   **`unity-install.js`**:
    *   **Purpose**: CLI script using `commander` to copy a finished Unity WebGL build from a specified source directory into the SvelteKit `static/craftspace` directory.
    *   **Role**: Handles the deployment step of placing the Unity build where the SvelteKit app can serve it.
    *   **Importance**: High (Deployment process).
*   **`utils.js`**:
    *   **Purpose**: Contains simple helper functions (`getCollectionPath`, `getItemPath`) for constructing paths within the collections directory.
    *   **Role**: Utility functions, likely intended for use by other scripts, although their current usage seems limited based on provided files.
    *   **Importance**: Low.

### Area 4: `SvelteKit/BackSpace/src/lib/` (Core SvelteKit Library Code)

*   **Overview**: Contains core shared library code for the SvelteKit application, including constants and the source-of-truth Zod schema definitions.
*   **Key Subdirectories/Files**:
    *   **`constants/`**: Exports shared constants (`PATHS`, `EMOJI`, `CLI_FORMATTING` via `index.ts`). High importance for configuration and consistency.
        *   `cli-formatting.ts`: ANSI escape codes for terminal colors. Medium importance.
        *   `emoji.ts`: Categorized emoji characters for logging. Medium importance.
        *   `index.ts`: Barrel file re-exporting constants. High importance.
        *   `paths.ts`: Absolute path constants for key directories. High importance.
    *   **`schemas/`**: Contains the Zod schema definitions (`CollectionSchema`, `ItemSchema` in `.ts` files). These are the ultimate source of truth, generating the JSON schemas. High importance for data modeling.
        *   `collection.ts`: Zod schema for `collection.json`, includes `x_meta` via `.describe()`. High importance.
        *   `item.ts`: Zod schema for `item.json`, includes `x_meta` via `.describe()`, uses `passthrough()`. High importance.
        *   `converters.ts`: Likely obsolete definitions for C# converters. Low importance.
*   **Importance**: High (Foundation for SvelteKit application logic and data structures).

### Area 5: `SvelteKit/BackSpace/src/routes/` (SvelteKit UI & API)

*   **Overview**: Contains the Svelte components (`.svelte`) defining the user interface pages and the TypeScript files (`+server.ts`) defining the backend API endpoints. Organizes UI into public (`/`), admin (`/admin`), and potentially other sections.
*   **UI (`.svelte` files)**:
    *   `+page.svelte`: Root page, renders the main CraftSpace visualization (`$lib/components/CraftSpace.svelte` - currently missing). High importance.
    *   `+layout.svelte`: Root layout, handles theme, loading state, conditional header/footer. High importance.
    *   `/admin/`: Contains pages and layouts for the administration interface.
        *   `+page.svelte`: Admin dashboard. Medium importance.
        *   `+layout.svelte`: Admin navigation layout. Medium importance.
        *   `/collections/`: Pages for browsing, creating, viewing details, editing collections, and browsing items within a collection. Rely heavily on API calls. Medium importance. Needs type annotations and some implementation details (save handlers, formatters).
    *   `/collections/create/+page.svelte`: Another collection creation form using `felte` and Zod validation. Potentially redundant with `/admin/collections/create`. Needs clarification. Medium importance.
*   **API (`+server.ts` files)**:
    *   `/api/collections/+server.ts`: `GET` endpoint to list all collections by reading `collection.json` files from disk. High importance.
    *   `/api/collections/[collectionId]/+server.ts`: `GET`, `PUT`, `DELETE` endpoints for individual collection CRUD operations on `collection.json`. High importance.
    *   `/api/collections/[collectionId]/items/+server.ts`: `GET`, `POST` endpoints to list items (using `items-index.json` or directory scan) and create new `item.json` files. High importance.
    *   `/api/collections/[collectionId]/items/[itemId]/+server.ts`: `GET`, `PUT`, `DELETE` endpoints for individual item CRUD operations on `item.json`. High importance.
    *   `/api/openlibrary/+server.ts`: `GET` endpoint to query the Internet Archive OpenLibrary collection using `internetarchive-sdk-js`. Medium importance.
*   **Issues Noted**: Missing `CraftSpace.svelte` component, missing type annotations in several UI components, unimplemented save handlers and utility functions, potential redundancy in collection creation UI, API endpoints need fixes for `PATHS.COLLECTIONS_DIR` usage.
*   **Importance**: High (Core user interface and backend API).

### Area 6: `SvelteKit/BackSpace/` Config Files & Root

*   **Overview**: Contains project configuration files for Node.js, SvelteKit, TypeScript, Tailwind, ESLint, Docker, and the local SvelteKit README.
*   **Key Files**:
    *   `Dockerfile`: Multi-stage build definition for production container. High importance (Deployment).
    *   `eslint.config.js`: ESLint configuration for code quality. Medium importance (Dev Tooling).
    *   `package.json`: Node.js project definition, dependencies, and scripts. High importance (Project Core).
    *   `README.md`: Local README for SvelteKit development. Medium importance (Docs).
    *   `svelte.config.js`: SvelteKit configuration (preprocessing, adapter). High importance (Build Config).
    *   `tailwind.config.js`: Tailwind CSS configuration. Medium importance (Styling Config).
    *   `tsconfig.json`: TypeScript configuration. High importance (TS Config).
    *   `vite.config.ts`: Vite configuration (dev server, build options, SSR). High importance (Build Config).
*   **Importance**: High (Defines project dependencies, build processes, and development environment).

### Area 7: `SvelteKit/BackSpace/src/` App Core (`.ts`, `.css`, `.html`)

*   **Overview**: Contains top-level files defining the SvelteKit application shell, global styles, type definitions, and backend initialization.
*   **Key Files**:
    *   `app.d.ts`: Ambient TypeScript declarations, notably extending `Window` for `createUnityInstance`. Medium importance (TypeScript integration).
    *   `app.css`: Global CSS reset and base styles. Medium importance (Global Styling).
    *   `app.html`: Main HTML template with SvelteKit placeholders and service worker registration. High importance (Application Shell).
    *   `index.ts`: Backend initialization logic (`initializeBackSpace`) including content manager setup and graceful shutdown handling. High importance (Backend Application Lifecycle).
*   **Importance**: High (Core application setup and entry points).

### Area 8: `Unity/CraftSpace/Assets/Editor/` (Unity Editor Scripts)

*   **Overview**: Contains C# scripts that run within the Unity Editor environment, used for build automation, custom editor windows/inspectors, and asset processing.
*   **`CraftSpace.Editor.asmdef`**:
    *   **Purpose**: Unity Assembly Definition file for the Editor scripts.
    *   **Role**: Defines a separate compilation unit for the editor code. Prevents editor code (using `UnityEditor`) from being included in player builds. References `CraftSpace` assembly.
    *   **Importance**: Medium (Standard Unity code organization).
*   **`Build.cs`**:
    *   **Purpose**: Provides static methods callable from CLI/CI to perform Unity builds (WebGL, Mac, etc.) using `BuildPipeline.BuildPlayer`.
    *   **Role**: Enables automated, headless builds. Integrates with `run-unity.sh` and `unity-automation.js`.
    *   **Importance**: High (Build Automation).
*   **`SchemaGenerator/SchemaGenerator.cs`**:
    *   **Purpose**: Core C# script for generating C# classes from JSON Schema files (read from `Content/schema/` or StreamingAssets). Adds `Tools > Import JSON Schema` menu item.
    *   **Functionality**: Uses NJsonSchema (or similar) to generate C# code, applies custom logic based on `x_meta` (e.g., `UnitySchemaConverter`) to add attributes/base classes (`SchemaGeneratedObject`), handles `extraFields`, writes `.cs` files to `Assets/Scripts/Schemas/Generated/`. Implements logic respecting IL2CPP/WebGL constraints (no reflection).
    *   **Role**: Translates platform-agnostic JSON schema into usable Unity C# code.
    *   **Importance**: High (Core Schema Pipeline).

### Area 9: `Unity/CraftSpace/Assets/Plugins/` (Native Plugins)

*   **Overview**: Contains native code plugins or JavaScript libraries for WebGL interaction.
*   **`WebGL/bridge.jslib`**:
    *   **Purpose**: Implements the JavaScript side of the Unity <-> JS bridge for WebGL, using Unity's `LibraryManager`.
    *   **Functionality**: Defines JS functions callable from C# via `[DllImport("__Internal")]` (`SendMessageToUnity`), receives messages from JS via `Module.SendMessage`, initializes communication, manages message queues, handles JSON, interacts with browser APIs, and likely implements interest registration (`RegisterInterest`, etc.).
    *   **Role**: Low-level communication channel enabling JS-first architecture.
    *   **Importance**: High (Core Unity-JS Bridge for WebGL).

### Area 10: `Unity/CraftSpace/Assets/Scripts/` (Core Unity C# Code)

*   **Overview**: Contains the main C# codebase for the Unity application, organized into subdirectories based on architectural layers (Bridge, Core, Schemas, Views).
*   **`Bridge/`**:
    *   **Overview**: Implements the C# side of the Unity <-> JavaScript communication bridge. Handles serialization, transport layers, and exposing Unity objects/methods.
    *   **Key Files**: `Bridge.cs` (central manager), `BridgeTransport.cs` (base class), `BridgeTransportWebGL.cs` (WebGL implementation using `DllImport`), `BridgeTransportWebServer.cs` / `SocketIO` / `WebView` (alternatives), `BridgePlugin.cs` (`DllImport` declarations), `BridgeJsonConverter.cs` (custom Newtonsoft converters for Unity types/messages), `Accessor.cs` (path expression engine via reflection/expressions), `BridgeObject.cs` / `BridgeExtensions.cs` (helpers), Component-Specific Bridges (`LeanTweenBridge`, etc.), Other Components (`Tile`, `KineticText`, etc. likely controlled via bridge).
    *   **Importance**: High (Core architecture enabling JS-first control).
*   **`Core/`**:
    *   **Overview**: Contains core application logic, managers, and essential systems not specific to bridge/schemas/views.
    *   **Key Files**: `Brewster.cs` (main entry point/manager), `InputManager.cs` (Unity Input System handling), `CameraController.cs` (camera management, navigation logic, Cinemachine interaction), `CollectionGridLayout.cs` (UI layout component for item views), `CollectionDisplay.cs` (coordinates collection view, uses `ViewFactory`), `ViewFactory.cs` (instantiates view prefabs), `CameraBackgroundColor.cs` (utility).
    *   **Importance**: High (Core application managers and foundational systems).
*   **`Schemas/`**:
    *   **Overview**: Contains C# classes related to data schemas, both generated and manually extended.
    *   **Key Files**:
        *   `Generated/`: Contains `CollectionSchema.cs`, `ItemSchema.cs` (auto-generated from JSON Schema by `SchemaGenerator.cs`), `README.md` (explains generation, likely redundant/mergeable).
        *   `SchemaGeneratedObject.cs`: Abstract base class for generated schema classes. Implements `INotifyPropertyChanged`, handles JSON deserialization (likely using Newtonsoft.Json with specific settings for WebGL), manages `extraFields` dictionary for extensibility. High importance.
        *   `Collection.cs`, `Item.cs`: Manual partial classes extending the generated `CollectionSchema` and `ItemSchema`. Contain custom logic, methods, or properties not defined in the schema. High importance.
        *   `SchemaConverter.cs`: Potentially contains static helper methods or custom `JsonConverter` implementations used during serialization/deserialization if not handled by `SchemaGeneratedObject` or `BridgeJsonConverter`. Medium importance.
        *   `ICollectionView.cs`, `IItemView.cs`: Interfaces defining the contract for view components that display Collection or Item data. Likely used by `ViewFactory` and implemented by `CollectionView.cs`/`ItemView.cs`. High importance (View System Contract).
    *   **Importance**: High (Core data representation and handling in Unity).
*   **`Views/`**:
    *   **Overview**: Implements the View layer components responsible for visually representing the data models (Collections, Items) in the Unity scene.
    *   **Key Files**:
        *   `Renderers/`: Contains specific rendering components.
            *   `BaseViewRenderer.cs`: Abstract base class for components that handle visual rendering aspects (e.g., setting images, text). Medium importance.
            *   `SingleImageRenderer.cs`: Concrete implementation for displaying an item's cover image. Medium importance.
        *   `IModelView.cs`: Interface implemented by views (`CollectionView`, `ItemView`) to standardize how they receive and bind to data models (`Collection`, `Item`). Defines methods like `SetData(T model)`. High importance (View System Contract).
        *   `CollectionView.cs`: MonoBehaviour responsible for displaying a collection, likely managing a `CollectionGridLayout` or similar to arrange `ItemView` instances. Binds to a `Collection` data object. High importance.
        *   `ItemView.cs`: MonoBehaviour representing a single item in the scene (e.g., a card or 3D representation). Binds to an `Item` data object, updates visuals (using Renderers), and handles interactions (via `ItemSelectionHandler`). High importance.
        *   `ItemViewsContainer.cs`: Component likely responsible for managing the pool or instantiation of `ItemView` prefabs within a `CollectionView`, possibly handling virtualization. High importance.
        *   `ItemSelectionHandler.cs`: Handles user input (clicks, taps) on `ItemView` instances, triggering selection events. Medium importance.
        *   `ItemLabel.cs`, `ItemInfoPanel.cs`: UI components specifically for displaying text information (title, metadata) related to an item, likely children of an `ItemView` prefab. Medium importance.
    *   **Importance**: High (Visual representation and user interaction layer).

### Area 11: `Unity/CraftSpace/Assets/StreamingAssets/Content/schemas/` (Runtime JSON Schemas)

*   **Overview**: Contains the source-of-truth JSON Schema files (`Collection.json`, `Item.json`) that define the structure of the core data entities used throughout the project. These files are placed in `StreamingAssets` so they can be loaded at runtime by Unity if needed (e.g., for validation or dynamic processing), but their primary role is as the input for code generation processes (`SchemaGenerator.cs` in Editor, `schema-export.js` in BackSpace).
*   **Key Files**:
    *   `Collection.json`: Defines the structure for a collection, including properties like `id`, `name`, `description`, `items` (likely an array of item identifiers or embedded items), and potentially metadata or view configuration. Includes `x_meta` hints.
    *   `Item.json`: Defines the structure for an individual item, including properties like `identifier`, `title`, `description`, `author`, `creationDate`, `tags`, `files` (e.g., image URLs, model paths), and custom fields defined by the `$defs` or `properties` sections. Includes `x_meta` hints.
*   **Importance**: Critical. These schemas are the foundation for data consistency across the SvelteKit frontend, Node.js backend scripts, and the Unity application. Any changes here necessitate regenerating the corresponding BackSpace `Content/schema/` JSON files and Unity C# classes.

### Area 12: Root Shell Scripts

*   **Overview**: Contains standalone shell scripts used for automation, environment setup, and build processes, primarily related to Unity.
*   **Key Files**:
    *   **`Unity/CraftSpace/run-unity.sh`**:
        *   **Purpose**: Executes the Unity Editor in batch mode to run Editor methods. Handles CLI args, logging, licensing, finds Unity executable (dynamically or via env vars).
        *   **Role**: Essential wrapper for headless Unity operations (CI/CD, automation).
        *   **Importance**: High (Core Build/Automation).
    *   **`Unity/CraftSpace/ci-build.sh`**:
        *   **Purpose**: Higher-level CI script. Likely calls `run-unity.sh` for specific builds (WebGL, Mac) and performs pre/post-build steps.
        *   **Role**: Orchestrates build sequences for CI.
        *   **Importance**: Medium (CI/CD Helper).
    *   **`SvelteKit/BackSpace/scripts/unity-env.sh`**:
        *   **Purpose**: Simple wrapper executing `unity-env.js` and sourcing its output (`export VAR=value`) into the current shell.
        *   **Role**: Developer convenience for setting up the shell environment for Unity commands.
        *   **Importance**: Medium (Developer Tooling).
*   **Importance**: High (Crucial for Unity automation and CI/CD). 