{"version":3,"file":"MagnetItem.js","sourceRoot":"","sources":["../src/MagnetItem.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,SAAS,EAAkB,QAAQ,EAAE,gBAAgB,EAAE,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAc,QAAQ,EAAE,QAAQ,EAAkB,MAAM,QAAQ,CAAC;AA4BzJ,SAAS,0BAA0B,CAAC,QAA6B;IAC/D,MAAM,UAAU,GAAqB,EAAE,CAAC;IACxC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QACvB,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC;oBACpC,GAAG,EAAE,KAAK,CAAC,GAAG;oBACd,GAAG,EAAE,KAAK,CAAC,GAAG;oBACd,IAAI,EAAE,KAAK,CAAC,IAAI;iBACjB,CAAC,CAAC,CAAC,CAAC;QACP,CAAC;IACH,CAAC,CAAC,CAAC;IACH,OAAO,IAAI,GAAG,CAAC;QACb,CAAC,MAAM,EAAE,UAAU,CAAC;KACrB,CAAC,CAAC;AACL,CAAC;AAGM,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,SAAS;IACrC,MAAM,KAAK,KAAK;QACZ,OAAO,SAAS,CAAA;;;;;;;;;;;;;;;;;;;;;;;;KAwBnB,CAAC;IACF,CAAC;IAQD,cAAc;QACV,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAChE,CAAC;IAED,YAAY;QACV,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,UAAwB,CAAC;QAC/C,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9F,CAAC;IAED,aAAa;QACX,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACrD,CAAC;IAED,OAAO;QACH,MAAM,kBAAkB,GAAG,0BAA0B,CAAC,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;QAC1F,IAAI,CAAC,MAAM,CAAC;YACR,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YACrB,UAAU,CAAC,EAAC,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,EAAC,CAAC;YAC5G,QAAQ,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,MAAM,EAAE,kBAAkB,EAAC,CAAC;YAChF,QAAQ,CAAC,EAAC,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC;SACzE,CAAC,CAAC;IACP,CAAC;CACJ,CAAA;AA3BW;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC;0CACtB;AAGf;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;8CACO;AAjC/B,UAAU;IADtB,QAAQ;GACI,UAAU,CAyDtB;;AAED,MAAM,CAAC,MAAM,UAAU,GAAG,UAAS,IAAqB;IACpD,OAAO,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AACzC,CAAC,CAAC","sourcesContent":["import { IoElement, IoElementProps, Register, ReactiveProperty, h3, ioSlider, ioSlider2d, IoSlider2d, ioObject, ioButton, PropertyConfig } from 'io-gui';\nimport { SpacetimeController, ViewMetadata } from './SpacetimeController';\n\nexport type Magnet = {\n  dynamicFriction: number;\n  enabled: boolean;\n  magnetEnabled: boolean;\n  magnetHoleRadius: number;\n  magnetId: string;\n  magnetRadius: number;\n  magnetSoftness: number;\n  magnetStrength: number;\n  mass: number;\n  scoreMax: number;\n  scoreMin: number;\n  searchExpression: string;\n  searchType: string;\n  staticFriction: number;\n  title: string;\n  viewScale: number;\n  viewScaleInitial: number;\n}\n\nexport type MagnetItemProps = IoElementProps & {\n  magnet: Magnet;\n  controller: SpacetimeController;\n}\n\nfunction generateMagnetEditorConfig(metadata: Array<ViewMetadata>) {\n  const viewConfig: PropertyConfig[] = [];\n  metadata.forEach(field => {\n    if (field.type === 'float') {\n      viewConfig.push([field.name, ioSlider({\n        min: field.min,\n        max: field.max,\n        step: field.step,\n      })]);\n    }\n  });\n  return new Map([\n    [Object, viewConfig]\n  ]);\n}\n\n@Register\nexport class MagnetItem extends IoElement {\n    static get Style() {\n        return /* css */`\n            :host {\n                display: flex;\n                flex-direction: row;\n                gap: 0.5em;\n                border: var(--io_border);\n                border-color: var(--io_borderColorOutset);\n                margin: 0.5em 0;\n                padding: 0.5em;\n                border-radius: var(--io_borderRadius);\n                background-color: var(--io_bgColor);\n            }\n            :host > h3 {\n                margin: 0 1em 0 0;\n            }\n            :host > io-slider-2d {\n              align-self: flex-start;\n            }\n            :host > io-object {\n              flex: 1 1 auto;\n            }\n            :host > io-object io-property-editor > .row > :first-child {\n              flex: 0 1 10em; \n            }\n    `;\n    }\n\n    @ReactiveProperty({type: Object, init: null})\n    declare magnet: Magnet;\n\n    @ReactiveProperty({type: Object})\n    declare controller: SpacetimeController;\n\n    onDeleteMagnet() {\n        this.controller.sendDeleteMagnetEvent(this.magnet.magnetId);\n    }\n\n    onPushMagnet() {\n      const slider = this.$.moveslider as IoSlider2d;\n      this.controller.sendPushMagnetEvent(this.magnet.magnetId, slider.value[0], slider.value[1]);\n    }\n\n    magnetMutated() {\n      this.controller.sendUpdateMagnetEvent(this.magnet);\n    }\n\n    changed() {\n        const magnetEditorConfig = generateMagnetEditorConfig(this.controller.magnetViewMetadata);\n        this.render([\n            h3(this.magnet.title),\n            ioSlider2d({id: 'moveslider', value: [0, 0], min: [-1, -1], max: [1, 1], '@value-input': this.onPushMagnet}),\n            ioObject({value: this.magnet, label: 'Magnet Data', config: magnetEditorConfig}),\n            ioButton({label: 'Delete', action: this.onDeleteMagnet, class: 'red'})\n        ]);\n    }\n}\n\nexport const magnetItem = function(arg0: MagnetItemProps) {\n    return MagnetItem.vConstructor(arg0);\n};"]}