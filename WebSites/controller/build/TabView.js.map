{"version":3,"file":"TabView.js","sourceRoot":"","sources":["../src/TabView.ts"],"names":[],"mappings":"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","sourcesContent":["import { h2, div, Register, ioOptionSelect, MenuOption, ListenerDefinition } from 'io-gui';\nimport { VIEW_MODE_OPTIONS, DEFAULT_VIEW_MODE } from './types/ViewMode.js';\nimport { TabBase, TabBaseProps } from './TabBase.js';\n\nconst viewModeOption = new MenuOption({ options: VIEW_MODE_OPTIONS });\n\n@Register\nexport class TabView extends TabBase {\n    static get Style() {\n        return /* css */`\n            :host {\n                display: flex;\n                flex-direction: column;\n                align-items: stretch;\n            }\n            :host > h2 {\n                pointer-events: none;\n                user-select: none;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                margin: 0 0 6px 0;\n            }\n            :host .view-controls {\n                align-self: flex-start;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                margin: 2px 8px 4px 8px;\n            }\n        `;\n    }\n\n    static get Listeners() {\n        return {\n            'pointerdown': 'onPointerdown',\n            'touchstart': ['preventDefault', {passive: false}] as ListenerDefinition,\n            'touchmove': ['preventDefault', {passive: false}] as ListenerDefinition,\n            'wheel': 'onWheel',\n        };\n    }\n\n    preventDefault(event: Event) {\n        event.preventDefault();\n    }\n    onPointerdown(event: PointerEvent) {\n        this.setPointerCapture(event.pointerId);\n        this.addEventListener('pointerup', this.onPointerup);\n        this.addEventListener('pointermove', this.onPointermove);\n        this.addEventListener('pointercancel', this.onPointerup);\n    }\n    onPointermove(event: PointerEvent) {\n        if (this.simulatorState?.viewMode !== 'manual') return;\n        if (event.movementX || event.movementY) {\n            this.controller.sendPanEvent(\n                event.movementX * 0.03,\n                event.movementY * 0.03\n            );\n        }\n    }\n    onPointerup(event: PointerEvent) {\n        this.releasePointerCapture(event.pointerId);\n        this.removeEventListener('pointerup', this.onPointerup);\n        this.removeEventListener('pointermove', this.onPointermove);\n        this.removeEventListener('pointercancel', this.onPointerup);\n    }\n\n    onWheel(event: WheelEvent) {\n      if (this.simulatorState?.viewMode !== 'manual') return;\n      this.controller.sendZoomEvent(event.deltaY * 0.01);\n    }\n\n    onViewModeChange(event: CustomEvent) {\n        const newMode = event.detail?.value;\n        if (!newMode || !this.controller?.clientChannel) return;\n        this.controller.clientChannel.send({\n            type: 'broadcast',\n            event: 'setViewMode',\n            payload: { mode: newMode, targetSimulatorId: this.controller.currentSimulatorId }\n        }).catch((err: any) => console.error('[Controller] setViewMode send failed:', err));\n    }\n\n    changed() {\n        const vm = this.simulatorState?.viewMode || DEFAULT_VIEW_MODE;\n        this.render([\n            div({ class: 'view-controls' }, [\n                h2('View Mode:'),\n                ioOptionSelect({\n                    value: vm,\n                    option: viewModeOption,\n                    '@value-input': (e: CustomEvent) => this.onViewModeChange(e)\n                }),\n            ]),\n            vm === 'manual' ? h2('DRAG to pan â€¢ SCROLL to zoom') : null,\n        ]);\n    }\n}\n\nexport const tabView = function(arg0: TabBaseProps) {\n    return TabView.vConstructor(arg0);\n};\n"]}